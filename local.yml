---
 - name: Maintain OpenDistro Elastic Configuration
   hosts: localhost
   gather_facts: yes
   user: root
   vars_files:
     - group_vars/main.yml
     #- "vars/{{ Environment }}/main.yml"
   roles:
     - system
     - opendistro-elastic

  #  vars:
  #    lock_file_path=/tmp/ansible-playbook.lock

  #  pre_tasks: 
  #     - stat: path={{lock_file_path}}
  #       register: lock_file

  #     - fail: msg="Sorry, I found a lockfile, so I'm assuming that someone was already running ansible when you started this deploy job. Add -f to your deploy command to forcefully continue deploying, if the previous deploy was aborted."
  #       when: lock_file.stat.exists|bool and not force_ignore_lock|bool

  #     - file: path={{lock_file_path}} state=absent
  #       sudo: yes
  #       when: "{{force_ignore_lock}}"

  #     - file: path={{lock_file_path}} state=touch
  #       sudo: yes

  #  post_tasks:
  #     - file: path={{lock_file_path}} state=absent
  #       sudo: yes